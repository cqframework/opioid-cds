{
  "resourceType": "Bundle",
  "id": "OpioidCDSREC11-bundle",
  "type": "transaction",
  "entry": [ {
    "resource": {
      "resourceType": "Library",
      "id": "OpioidCDSREC11",
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid dict\"><tr><th scope=\"row\"><b>Id: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">library-OpioidCDSREC11</td></tr><tr><th scope=\"row\"><b>Type: </b></th><td style=\"padding-right: 25px;\"> Logic Library </td></tr><tr><th scope=\"row\"><b>Status: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">active</td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"3\" scope=\"row\"><b>Related: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>http://fhir.org/guides/cdc/opioid-cds/Library/FHIRHelpers</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>http://fhir.org/guides/cdc/opioid-cds/Library/library-OpioidCDSCommon</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>http://fhir.org/guides/cdc/opioid-cds/Library/library-OpioidCDSRoutines</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><th scope=\"row\"><b>Content: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><b>type: </b><span>text/cql</span></td></tr><tr><td colspan=\"2\" style=\"padding-left: 25px; padding-right: 25px;\"><pre><code class=\"language-cql\">library OpioidCDSREC11 version '1.2.3'\n\nusing FHIR version '3.0.0'\n\ninclude FHIRHelpers version '3.0.0' called FHIRHelpers\ninclude OpioidCDSCommon version '1.2.3' called Common\ninclude OpioidCDSRoutines version '1.2.3' called Routines\n\n/*\n**\n**  Recommendation #11\n**    Clinicians should avoid prescribing opioid pain medication and benzodiazepines\n**    concurrently whenever possible (recommendation category: A, evidence type: 3)\n**\n**  When\n**    Provider is prescribing an opioid analgesic with ambulatory misuse potential in the outpatient setting\n**    Provider is prescribing a benzodiazepine medication\n**    Opioid review is useful for this patient:\n**      Patient is 18 or over\n**      Patient does not have findings indicating limited life expectancy\n**      Patient does not have orders for therapies indicating end of life care\n**      Patient is not undergoing active cancer treatment:\n**        Patient has had at least 2 encounters within the past year with any diagnosis of cancer\n**    Patient prescribed opioid analgesic with ambulatory misuse potential and benzodiazepine medication concurrently\n**  Then\n**    Recommend to avoid prescribing opioid pain medication and benzodiazepine concurrently\n**      Will revise\n**      Benefits outweigh risks, snooze 3 months\n**      N/A - see comment, snooze 3 months\n**\n*/\n\n// META: Plan Definition: http://fhir.org/guides/cdc/opioid-cds/PlanDefinition/opioid-cds-11\n\nparameter ContextPrescriptions List&lt;MedicationRequest&gt;\n\ncontext Patient\n\ndefine &quot;Opioid Analgesic with Ambulatory Misuse Potential Prescriptions&quot;:\n  Common.&quot;Is Opioid Analgesic with Ambulatory Misuse Potential?&quot;( ContextPrescriptions )\n\ndefine &quot;Benzodiazepine Prescriptions&quot;:\n  Common.&quot;Is Benzodiazepine?&quot;( ContextPrescriptions )\n\ndefine &quot;Patient Is Being Prescribed Opioid Analgesic with Ambulatory Misuse Potential&quot;:\n  exists( &quot;Opioid Analgesic with Ambulatory Misuse Potential Prescriptions&quot; )\n\ndefine &quot;Patient Is Being Prescribed Benzodiazepine&quot;:\n  exists( &quot;Benzodiazepine Prescriptions&quot; )\n\ndefine &quot;Is Recommendation Applicable?&quot;:\n  &quot;Inclusion Criteria&quot;\n    and not &quot;Exclusion Criteria&quot;\n\ndefine &quot;Inclusion Criteria&quot;:\n  (\n    (\n      &quot;Patient Is Being Prescribed Opioid Analgesic with Ambulatory Misuse Potential&quot;\n        and exists Common.&quot;Active Ambulatory Benzodiazepine Rx&quot;\n    )\n      or (\n        &quot;Patient Is Being Prescribed Benzodiazepine&quot;\n          and exists Common.&quot;Active Ambulatory Opioid Rx&quot;\n      )\n  )\n    and Routines.&quot;Is Opioid Review Useful?&quot;\n\ndefine &quot;Exclusion Criteria&quot;:\n  false\n\ndefine &quot;Get Indicator&quot;:\n  if &quot;Is Recommendation Applicable?&quot;\n    then 'warning'\n  else null\n\ndefine &quot;Get Summary&quot;:\n  if &quot;Is Recommendation Applicable?&quot;\n    then 'Avoid prescribing opioid pain medication and benzodiazepine concurrently whenever possible.'\n  else null\n\ndefine &quot;Get Detail&quot;:\n  if &quot;Is Recommendation Applicable?&quot;\n    then\n      if &quot;Patient Is Being Prescribed Benzodiazepine&quot;\n        then 'The benzodiazepine prescription request is concurrent with an active opioid prescription'\n      else 'The opioid prescription request is concurrent with an active benzodiazepine prescription'\n  else null\n</code></pre>\n                    \n                    \n                </td>\n            </tr>\n        \n    </table>\n</div>"
      },
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
        "valueReference": {
          "reference": "cqf-tooling"
        }
      } ],
      "url": "http://fhir.org/guides/cdc/opioid-cds/Library/OpioidCDSREC11",
      "version": "1.2.3",
      "name": "OpioidCDSREC11",
      "title": "Library - Opioid CDS Logic for recommendation #11",
      "status": "active",
      "experimental": true,
      "type": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/library-type",
          "code": "logic-library"
        } ]
      },
      "publisher": "Centers for Disease Control and Prevention (CDC)",
      "description": "Opioid decision support logic to avoid prescribing opioid pain medication and benzodiazepines concurrently whenever possible.",
      "purpose": "The purpose of this library is to determine whether opioid pain medication and benzodiazepines have been prescribed concurrently.",
      "usage": "This library is used to notify the prescriber/user to avoid prescribing opioid pain medication and benzodiazepines concurrently.",
      "useContext": [ {
        "code": {
          "system": "http://hl7.org/fhir/usage-context-type",
          "code": "focus",
          "display": "Clinical Focus"
        },
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://snomed.info/sct",
            "code": "182888003",
            "display": "Medication requested (situation)"
          } ]
        }
      }, {
        "code": {
          "system": "http://hl7.org/fhir/usage-context-type",
          "code": "focus",
          "display": "Clinical Focus"
        },
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://snomed.info/sct",
            "code": "82423001",
            "display": "Chronic pain (finding)"
          } ]
        }
      } ],
      "jurisdiction": [ {
        "coding": [ {
          "system": "urn:iso:std:iso:3166",
          "code": "US",
          "display": "United States of America"
        } ]
      } ],
      "copyright": "© CDC 2016+.",
      "relatedArtifact": [ {
        "type": "documentation",
        "display": "CDC guideline for prescribing opioids for chronic pain",
        "url": "https://www.cdc.gov/mmwr/volumes/65/rr/rr6501e1.htm?CDC_AA_refVal=https%3A%2F%2Fwww.cdc.gov%2Fmmwr%2Fvolumes%2F65%2Frr%2Frr6501e1er.htm"
      } ],
      "content": [ {
        "contentType": "text/cql",
        "data": "bGlicmFyeSBPcGlvaWRDRFNSRUMxMSB2ZXJzaW9uICcxLjIuMycKCnVzaW5nIEZISVIgdmVyc2lvbiAnMy4wLjAnCgppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzMuMC4wJyBjYWxsZWQgRkhJUkhlbHBlcnMKaW5jbHVkZSBPcGlvaWRDRFNDb21tb24gdmVyc2lvbiAnMS4yLjMnIGNhbGxlZCBDb21tb24KaW5jbHVkZSBPcGlvaWRDRFNSb3V0aW5lcyB2ZXJzaW9uICcxLjIuMycgY2FsbGVkIFJvdXRpbmVzCmluY2x1ZGUgT3Bpb2lkQ0RTQ29tbW9uQ29uZmlnIHZlcnNpb24gJzEuMi4zJyBjYWxsZWQgQ29uZmlnCgovKgoqKgoqKiAgUmVjb21tZW5kYXRpb24gIzExCioqICAgIENsaW5pY2lhbnMgc2hvdWxkIGF2b2lkIHByZXNjcmliaW5nIG9waW9pZCBwYWluIG1lZGljYXRpb24gYW5kIGJlbnpvZGlhemVwaW5lcwoqKiAgICBjb25jdXJyZW50bHkgd2hlbmV2ZXIgcG9zc2libGUgKHJlY29tbWVuZGF0aW9uIGNhdGVnb3J5OiBBLCBldmlkZW5jZSB0eXBlOiAzKQoqKgoqKiAgV2hlbgoqKiAgICBQcm92aWRlciBpcyBwcmVzY3JpYmluZyBhbiBvcGlvaWQgYW5hbGdlc2ljIHdpdGggYW1idWxhdG9yeSBtaXN1c2UgcG90ZW50aWFsIGluIHRoZSBvdXRwYXRpZW50IHNldHRpbmcKKiogICAgUHJvdmlkZXIgaXMgcHJlc2NyaWJpbmcgYSBiZW56b2RpYXplcGluZSBtZWRpY2F0aW9uCioqICAgIE9waW9pZCByZXZpZXcgaXMgdXNlZnVsIGZvciB0aGlzIHBhdGllbnQ6CioqICAgICAgUGF0aWVudCBpcyAxOCBvciBvdmVyCioqICAgICAgUGF0aWVudCBkb2VzIG5vdCBoYXZlIGZpbmRpbmdzIGluZGljYXRpbmcgbGltaXRlZCBsaWZlIGV4cGVjdGFuY3kKKiogICAgICBQYXRpZW50IGRvZXMgbm90IGhhdmUgb3JkZXJzIGZvciB0aGVyYXBpZXMgaW5kaWNhdGluZyBlbmQgb2YgbGlmZSBjYXJlCioqICAgICAgUGF0aWVudCBpcyBub3QgdW5kZXJnb2luZyBhY3RpdmUgY2FuY2VyIHRyZWF0bWVudDoKKiogICAgICAgIFBhdGllbnQgaGFzIGhhZCBhdCBsZWFzdCAyIGVuY291bnRlcnMgd2l0aGluIHRoZSBwYXN0IHllYXIgd2l0aCBhbnkgZGlhZ25vc2lzIG9mIGNhbmNlcgoqKiAgICBQYXRpZW50IHByZXNjcmliZWQgb3Bpb2lkIGFuYWxnZXNpYyB3aXRoIGFtYnVsYXRvcnkgbWlzdXNlIHBvdGVudGlhbCBhbmQgYmVuem9kaWF6ZXBpbmUgbWVkaWNhdGlvbiBjb25jdXJyZW50bHkKKiogIFRoZW4KKiogICAgUmVjb21tZW5kIHRvIGF2b2lkIHByZXNjcmliaW5nIG9waW9pZCBwYWluIG1lZGljYXRpb24gYW5kIGJlbnpvZGlhemVwaW5lIGNvbmN1cnJlbnRseQoqKiAgICAgIFdpbGwgcmV2aXNlCioqICAgICAgQmVuZWZpdHMgb3V0d2VpZ2ggcmlza3MsIHNub296ZSAzIG1vbnRocwoqKiAgICAgIE4vQSAtIHNlZSBjb21tZW50LCBzbm9vemUgMyBtb250aHMKKioKKi8KCi8vIE1FVEE6IFBsYW4gRGVmaW5pdGlvbjogaHR0cDovL2ZoaXIub3JnL2d1aWRlcy9jZGMvb3Bpb2lkLWNkcy9QbGFuRGVmaW5pdGlvbi9vcGlvaWQtY2RzLTExCgpwYXJhbWV0ZXIgQ29udGV4dFByZXNjcmlwdGlvbnMgTGlzdDxNZWRpY2F0aW9uUmVxdWVzdD4KCmNvbnRleHQgUGF0aWVudAoKZGVmaW5lICJPcGlvaWQgQW5hbGdlc2ljIHdpdGggQW1idWxhdG9yeSBNaXN1c2UgUG90ZW50aWFsIFByZXNjcmlwdGlvbnMiOgogIENvbW1vbi4iSXMgT3Bpb2lkIEFuYWxnZXNpYyB3aXRoIEFtYnVsYXRvcnkgTWlzdXNlIFBvdGVudGlhbD8iKCBDb250ZXh0UHJlc2NyaXB0aW9ucyApCgpkZWZpbmUgIkJlbnpvZGlhemVwaW5lIFByZXNjcmlwdGlvbnMiOgogIENvbW1vbi4iSXMgQmVuem9kaWF6ZXBpbmU/IiggQ29udGV4dFByZXNjcmlwdGlvbnMgKQoKZGVmaW5lICJQYXRpZW50IElzIEJlaW5nIFByZXNjcmliZWQgT3Bpb2lkIEFuYWxnZXNpYyB3aXRoIEFtYnVsYXRvcnkgTWlzdXNlIFBvdGVudGlhbCI6CiAgZXhpc3RzKCAiT3Bpb2lkIEFuYWxnZXNpYyB3aXRoIEFtYnVsYXRvcnkgTWlzdXNlIFBvdGVudGlhbCBQcmVzY3JpcHRpb25zIiApCgpkZWZpbmUgIlBhdGllbnQgSXMgQmVpbmcgUHJlc2NyaWJlZCBCZW56b2RpYXplcGluZSI6CiAgZXhpc3RzKCAiQmVuem9kaWF6ZXBpbmUgUHJlc2NyaXB0aW9ucyIgKQoKZGVmaW5lICJJcyBSZWNvbW1lbmRhdGlvbiBBcHBsaWNhYmxlPyI6CiAgIkluY2x1c2lvbiBDcml0ZXJpYSIKICAgIGFuZCBub3QgIkV4Y2x1c2lvbiBDcml0ZXJpYSIKCmRlZmluZSAiUGF0aWVudCBBZ2UgTGVzcyBUaGFuIDE4IjoKICBpZiAoQ29uZmlnLiJBZ2UgTGVzcyB0aGFuIDE4IFllYXJzIElzIEVuYWJsZWQiKSB0aGVuCiAgICBBZ2VJblllYXJzQXQoVG9kYXkoKSkgPCAxOAogIGVsc2UKICAgIGZhbHNlCgpkZWZpbmUgIkluY2x1c2lvbiBDcml0ZXJpYSI6CiAgKAogICAgKAogICAgICAiUGF0aWVudCBJcyBCZWluZyBQcmVzY3JpYmVkIE9waW9pZCBBbmFsZ2VzaWMgd2l0aCBBbWJ1bGF0b3J5IE1pc3VzZSBQb3RlbnRpYWwiCiAgICAgICAgYW5kIGV4aXN0cyBDb21tb24uIkFjdGl2ZSBBbWJ1bGF0b3J5IEJlbnpvZGlhemVwaW5lIFJ4IgogICAgKQogICAgICBvciAoCiAgICAgICAgIlBhdGllbnQgSXMgQmVpbmcgUHJlc2NyaWJlZCBCZW56b2RpYXplcGluZSIKICAgICAgICAgIGFuZCBleGlzdHMgQ29tbW9uLiJBY3RpdmUgQW1idWxhdG9yeSBPcGlvaWQgUngiCiAgICAgICkKICApCiAgICBhbmQgbm90ICJQYXRpZW50IEFnZSBMZXNzIFRoYW4gMTgiCiAgICBhbmQgUm91dGluZXMuIklzIE9waW9pZCBSZXZpZXcgVXNlZnVsPyIKCmRlZmluZSAiRXhjbHVzaW9uIENyaXRlcmlhIjoKICBmYWxzZQoKZGVmaW5lICJHZXQgSW5kaWNhdG9yIjoKICBpZiAiSXMgUmVjb21tZW5kYXRpb24gQXBwbGljYWJsZT8iCiAgICB0aGVuICd3YXJuaW5nJwogIGVsc2UgbnVsbAoKZGVmaW5lICJHZXQgU3VtbWFyeSI6CiAgaWYgIklzIFJlY29tbWVuZGF0aW9uIEFwcGxpY2FibGU/IgogICAgdGhlbiAnQXZvaWQgcHJlc2NyaWJpbmcgb3Bpb2lkIHBhaW4gbWVkaWNhdGlvbiBhbmQgYmVuem9kaWF6ZXBpbmUgY29uY3VycmVudGx5IHdoZW5ldmVyIHBvc3NpYmxlLicKICBlbHNlIG51bGwKCmRlZmluZSAiR2V0IERldGFpbCI6CiAgaWYgIklzIFJlY29tbWVuZGF0aW9uIEFwcGxpY2FibGU/IgogICAgdGhlbgogICAgICBpZiAiUGF0aWVudCBJcyBCZWluZyBQcmVzY3JpYmVkIEJlbnpvZGlhemVwaW5lIgogICAgICAgIHRoZW4gJ1RoZSBiZW56b2RpYXplcGluZSBwcmVzY3JpcHRpb24gcmVxdWVzdCBpcyBjb25jdXJyZW50IHdpdGggYW4gYWN0aXZlIG9waW9pZCBwcmVzY3JpcHRpb24nCiAgICAgIGVsc2UgJ1RoZSBvcGlvaWQgcHJlc2NyaXB0aW9uIHJlcXVlc3QgaXMgY29uY3VycmVudCB3aXRoIGFuIGFjdGl2ZSBiZW56b2RpYXplcGluZSBwcmVzY3JpcHRpb24nCiAgZWxzZSBudWxsCg=="
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "Library/OpioidCDSREC11"
    }
  }, {
    "resource": {
      "resourceType": "PlanDefinition",
      "id": "opioidcds-11",
      "url": "http://fhir.org/guides/cdc/opioid-cds/PlanDefinition/opioidcds-11",
      "version": "1.2.3",
      "name": "PlanDefinition_Recommendation_11",
      "title": "PlanDefinition - CDC Opioid Prescribing Guideline Recommendation #11",
      "type": {
        "coding": [ {
          "system": "http://hl7.org/fhir/plan-definition-type",
          "code": "eca-rule",
          "display": "ECA Rule"
        } ]
      },
      "status": "draft",
      "publisher": "Centers for Disease Control and Prevention (CDC)",
      "description": "Concurrently prescribing opioid medications with benzodiazepines increases the risk of harm for the patient.",
      "purpose": "CDC’s Guideline for Prescribing Opioids for Chronic Pain is intended to improve communication between providers and patients about the risks and benefits of opioid therapy for chronic pain, improve the safety and effectiveness of pain treatment, and reduce the risks associated with long-term opioid therapy, including opioid use disorder and overdose. The Guideline is not intended for patients who are in active cancer treatment, palliative care, or end-of-life care.",
      "usage": "Clinicians should avoid prescribing opioid pain medication and benzodiazepines concurrently whenever possible.",
      "useContext": [ {
        "code": {
          "system": "http://hl7.org/fhir/usage-context-type",
          "code": "focus",
          "display": "Clinical Focus"
        },
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://snomed.info/sct",
            "code": "182888003",
            "display": "Medication requested (situation)"
          } ]
        }
      }, {
        "code": {
          "system": "http://hl7.org/fhir/usage-context-type",
          "code": "focus",
          "display": "Clinical Focus"
        },
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://snomed.info/sct",
            "code": "82423001",
            "display": "Chronic pain (finding)"
          } ]
        }
      } ],
      "jurisdiction": [ {
        "coding": [ {
          "system": "urn:iso:std:iso:3166",
          "code": "US",
          "display": "United States of America"
        } ]
      } ],
      "topic": [ {
        "text": "Opioid Prescribing"
      } ],
      "contributor": [ {
        "type": "author",
        "name": "Kensaku Kawamoto, MD, PhD, MHS"
      }, {
        "type": "author",
        "name": "Bryn Rhodes"
      }, {
        "type": "author",
        "name": "Floyd Eisenberg, MD, MPH"
      }, {
        "type": "author",
        "name": "Robert McClure, MD, MPH"
      } ],
      "copyright": "© CDC 2016+.",
      "library": [ {
        "reference": "Library/OpioidCDSREC11"
      } ],
      "action": [ {
        "triggerDefinition": [ {
          "type": "named-event",
          "eventName": "order-select"
        } ],
        "condition": [ {
          "kind": "applicability",
          "language": "text/cql",
          "expression": "Inclusion Criteria"
        } ],
        "action": [ {
          "title": "Existing patient has concurrent opioid and benzodiazepine prescriptions.",
          "description": "Checking if the trigger prescription meets the inclusion criteria for recommendation #11 workflow.",
          "documentation": [ {
            "type": "documentation",
            "display": "CDC guideline for prescribing opioids for chronic pain",
            "url": "https://www.cdc.gov/mmwr/volumes/65/rr/rr6501e1.htm?CDC_AA_refVal=https%3A%2F%2Fwww.cdc.gov%2Fmmwr%2Fvolumes%2F65%2Frr%2Frr6501e1er.htm"
          }, {
            "type": "documentation",
            "document": {
              "extension": [ {
                "url": "http://hl7.org/fhir/StructureDefinition/cqif-strengthOfRecommendation",
                "valueCodeableConcept": {
                  "coding": [ {
                    "system": "http://hl7.org/fhir/recommendation-strength",
                    "code": "strong",
                    "display": "Strong"
                  } ]
                }
              }, {
                "url": "http://hl7.org/fhir/StructureDefinition/cqif-qualityOfEvidence",
                "valueCodeableConcept": {
                  "coding": [ {
                    "system": "http://hl7.org/fhir/evidence-quality",
                    "code": "low",
                    "display": "Low quality"
                  } ]
                }
              } ]
            }
          } ],
          "triggerDefinition": [ {
            "type": "named-event",
            "eventName": "order-select"
          } ],
          "condition": [ {
            "kind": "applicability",
            "description": "Check whether the existing patient is using opioids concurrently with benzodiazepines.",
            "language": "text/cql",
            "expression": "Is Recommendation Applicable?"
          } ],
          "groupingBehavior": "visual-group",
          "selectionBehavior": "exactly-one",
          "definition": {
            "reference": "ActivityDefinition/opioidcds-detected-issue-opioids-and-benzodiazepines"
          },
          "dynamicValue": [ {
            "path": "action.description",
            "expression": "Get Detail"
          }, {
            "path": "action.title",
            "expression": "Get Summary"
          }, {
            "path": "action.extension",
            "expression": "Get Indicator"
          } ],
          "action": [ {
            "description": "Will revise"
          }, {
            "description": "Risk of overdose carefully considered and outweighed by benefit; snooze 3 mo"
          }, {
            "description": "N/A - see comment; snooze 3 mo"
          } ]
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "PlanDefinition/opioidcds-11"
    }
  } ]
}