{
  "resourceType": "PlanDefinition",
  "id": "opioidcds-12-patient-view",
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Get Summary"
    }, {
      "url": "statement",
      "valueString": "define \"Get Summary\":\n  if \"Is Recommendation Applicable?\"\n    then 'Recommend opioid agonist or partial agonist treatment with methadone maintenance therapy or buprenorphine and/or behavioral therapy'\n  else null"
    }, {
      "url": "displaySequence",
      "valueInteger": 0
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSCommonConfig"
    }, {
      "url": "name",
      "valueString": "Age Less than 18 Years Is Enabled"
    }, {
      "url": "statement",
      "valueString": "// Opioid Review Useful\ndefine \"Age Less than 18 Years Is Enabled\":\n  true"
    }, {
      "url": "displaySequence",
      "valueInteger": 1
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Patient 18 or Older?"
    }, {
      "url": "statement",
      "valueString": "define \"Patient 18 or Older?\":\n  Config.\"Age Less than 18 Years Is Enabled\"\n    and AgeInYears() >= 18"
    }, {
      "url": "displaySequence",
      "valueInteger": 2
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSCommonConfig"
    }, {
      "url": "name",
      "valueString": "Evidence Based Treatment Criteria For Opioid Use Disorder"
    }, {
      "url": "statement",
      "valueString": "// Recommendation 12\ndefine \"Evidence Based Treatment Criteria For Opioid Use Disorder\":\n  true"
    }, {
      "url": "displaySequence",
      "valueInteger": 3
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Opioid Use Disorder Lookback Period"
    }, {
      "url": "statement",
      "valueString": "define \"Opioid Use Disorder Lookback Period\":\n  Interval[Today() - 90 days, Today()]"
    }, {
      "url": "displaySequence",
      "valueInteger": 4
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Not Receiving Evidence-Based Treatment for Opioid Use Disorder"
    }, {
      "url": "statement",
      "valueString": "define \"Not Receiving Evidence-Based Treatment for Opioid Use Disorder\":\n  Config.\"Evidence Based Treatment Criteria For Opioid Use Disorder\"\n    and not (\n      exists (\n        [MedicationRequest: Common.\"Buprenorphine and methadone medications\"] MR\n          where MR.status in { 'active', 'completed' }\n            and date from MR.authoredOn during day of \"Opioid Use Disorder Lookback Period\"\n      )\n      or exists (\n        [Procedure: Common.\"Substance misuse behavioral counseling\"] P\n          where P.status ~ 'completed'\n          and (\n            case\n              when P.performed is FHIR.dateTime then\n                Interval[FHIRHelpers.ToDateTime(P.performed as FHIR.dateTime), FHIRHelpers.ToDateTime(P.performed as FHIR.dateTime)]\n              when P.performed is FHIR.Period then\n                FHIRHelpers.ToInterval(P.performed as FHIR.Period)\n              else\n                null as Interval<DateTime>\n              end\n          )\n          during day of \"Opioid Use Disorder Lookback Period\"\n      )\n  )"
    }, {
      "url": "displaySequence",
      "valueInteger": 5
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSCommon"
    }, {
      "url": "name",
      "valueString": "US Core-Categorized Conditions"
    }, {
      "url": "statement",
      "valueString": "// 3. Medications indicating end of life\n    /* or exists (\n      \"Medications Indicating End of Life\"\n    ) */\ndefine \"US Core-Categorized Conditions\":\n  [Condition: category in \"Encounter Diagnosis Condition Category\"]\n    union [Condition: category in \"Problem List Condition Category\"]\n    union [Condition: category in \"US Core Health Concern Condition Category\"]"
    }, {
      "url": "displaySequence",
      "valueInteger": 6
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Diagnosis of Opioid Use Disorder"
    }, {
      "url": "statement",
      "valueString": "define \"Diagnosis of Opioid Use Disorder\":\n  Common.\"US Core-Categorized Conditions\" C\n    where C.code in Common.\"Opioid misuse disorders\"\n      and C.clinicalStatus in Common.\"Active Condition\"\n      and date from C.assertedDate during day of \"Opioid Use Disorder Lookback Period\""
    }, {
      "url": "displaySequence",
      "valueInteger": 7
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Presence of Diagnosis of Opioid Use Disorder"
    }, {
      "url": "statement",
      "valueString": "define \"Presence of Diagnosis of Opioid Use Disorder\":\n  exists (\"Diagnosis of Opioid Use Disorder\")"
    }, {
      "url": "displaySequence",
      "valueInteger": 8
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Positive Result from Opioid Use Disorder Evaluation Tool"
    }, {
      "url": "statement",
      "valueString": "define \"Positive Result from Opioid Use Disorder Evaluation Tool\":\n  true"
    }, {
      "url": "displaySequence",
      "valueInteger": 9
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Inclusion Criteria"
    }, {
      "url": "statement",
      "valueString": "define \"Inclusion Criteria\":\n  \"Patient 18 or Older?\"\n    and \"Not Receiving Evidence-Based Treatment for Opioid Use Disorder\"\n    and \"Presence of Diagnosis of Opioid Use Disorder\"\n    and \"Positive Result from Opioid Use Disorder Evaluation Tool\""
    }, {
      "url": "displaySequence",
      "valueInteger": 10
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Exclusion Criteria"
    }, {
      "url": "statement",
      "valueString": "define \"Exclusion Criteria\":\n  false"
    }, {
      "url": "displaySequence",
      "valueInteger": 11
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Is Recommendation Applicable?"
    }, {
      "url": "statement",
      "valueString": "define \"Is Recommendation Applicable?\":\n  \"Inclusion Criteria\"\n    and not \"Exclusion Criteria\""
    }, {
      "url": "displaySequence",
      "valueInteger": 12
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Get Detail"
    }, {
      "url": "statement",
      "valueString": "define \"Get Detail\":\n  if \"Is Recommendation Applicable?\"\n    then null\n  else null"
    }, {
      "url": "displaySequence",
      "valueInteger": 13
    } ]
  }, {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
    "extension": [ {
      "url": "libraryName",
      "valueString": "OpioidCDSREC12PatientView"
    }, {
      "url": "name",
      "valueString": "Get Indicator"
    }, {
      "url": "statement",
      "valueString": "define \"Get Indicator\":\n  if \"Is Recommendation Applicable?\"\n    then 'warning'\n  else null"
    }, {
      "url": "displaySequence",
      "valueInteger": 14
    } ]
  } ],
  "url": "http://fhir.org/guides/cdc/opioid-cds/PlanDefinition/opioidcds-12-patient-view",
  "version": "1.2.3",
  "name": "PlanDefinition_Recommendation_12_Patient_View",
  "title": "PlanDefinition - CDC Opioid Prescribing Guideline Recommendation #12 (patient-view)",
  "type": {
    "coding": [ {
      "system": "http://hl7.org/fhir/plan-definition-type",
      "code": "eca-rule",
      "display": "ECA Rule"
    } ]
  },
  "status": "draft",
  "publisher": "Centers for Disease Control and Prevention (CDC)",
  "description": "Evidence-based treatment (usually medication-assisted treatment with buprenorphine or methadone in combination with behavioral therapies) for patients with opioid use disorder.",
  "purpose": "CDC’s Guideline for Prescribing Opioids for Chronic Pain is intended to improve communication between providers and patients about the risks and benefits of opioid therapy for chronic pain, improve the safety and effectiveness of pain treatment, and reduce the risks associated with long-term opioid therapy, including opioid use disorder and overdose. The Guideline is not intended for patients who are in active cancer treatment, palliative care, or end-of-life care.",
  "usage": "Clinicians should offer or arrange evidence-based treatment (usually medication-assisted treatment with buprenorphine or methadone in combination with behavioral therapies) for patients with opioid use disorder.",
  "useContext": [ {
    "code": {
      "system": "http://hl7.org/fhir/usage-context-type",
      "code": "focus",
      "display": "Clinical Focus"
    },
    "valueCodeableConcept": {
      "coding": [ {
        "system": "http://snomed.info/sct",
        "code": "182888003",
        "display": "Medication requested (situation)"
      } ]
    }
  }, {
    "code": {
      "system": "http://hl7.org/fhir/usage-context-type",
      "code": "focus",
      "display": "Clinical Focus"
    },
    "valueCodeableConcept": {
      "coding": [ {
        "system": "http://snomed.info/sct",
        "code": "82423001",
        "display": "Chronic pain (finding)"
      } ]
    }
  } ],
  "jurisdiction": [ {
    "coding": [ {
      "system": "urn:iso:std:iso:3166",
      "code": "US",
      "display": "United States of America"
    } ]
  } ],
  "topic": [ {
    "text": "Opioid Prescribing"
  } ],
  "contributor": [ {
    "type": "author",
    "name": "Kensaku Kawamoto, MD, PhD, MHS"
  }, {
    "type": "author",
    "name": "Bryn Rhodes"
  }, {
    "type": "author",
    "name": "Floyd Eisenberg, MD, MPH"
  }, {
    "type": "author",
    "name": "Robert McClure, MD, MPH"
  } ],
  "copyright": "© CDC 2016+.",
  "library": [ {
    "reference": "Library/OpioidCDSREC12PatientView"
  } ],
  "action": [ {
    "triggerDefinition": [ {
      "type": "named-event",
      "eventName": "patient-view"
    } ],
    "condition": [ {
      "kind": "applicability",
      "language": "text/cql",
      "expression": "Inclusion Criteria"
    } ],
    "action": [ {
      "title": "Evidence-based treatment (usually medication-assisted treatment with buprenorphine or methadone in combination with behavioral therapies) for patients with opioid use disorder.",
      "description": "Checking if the triggering patient meets the inclusion criteria for recommendation #12 workflow.",
      "documentation": [ {
        "type": "documentation",
        "document": {
          "extension": [ {
            "url": "http://hl7.org/fhir/StructureDefinition/cqif-strengthOfRecommendation",
            "valueCodeableConcept": {
              "coding": [ {
                "system": "http://hl7.org/fhir/recommendation-strength",
                "code": "strong",
                "display": "Strong"
              } ]
            }
          }, {
            "url": "http://hl7.org/fhir/StructureDefinition/cqif-qualityOfEvidence",
            "valueCodeableConcept": {
              "coding": [ {
                "system": "http://hl7.org/fhir/evidence-quality",
                "code": "moderate",
                "display": "Moderate quality"
              } ]
            }
          } ],
          "url": "https://www.cdc.gov/mmwr/volumes/65/rr/rr6501e1.htm?CDC_AA_refVal=https%3A%2F%2Fwww.cdc.gov%2Fmmwr%2Fvolumes%2F65%2Frr%2Frr6501e1er.htm",
          "title": "CDC guideline for prescribing opioids for chronic pain"
        }
      } ],
      "triggerDefinition": [ {
        "type": "named-event",
        "eventName": "patient-view"
      } ],
      "condition": [ {
        "kind": "applicability",
        "description": "Check whether the existing patient has been diagnosed with misuse disorder and if they are receiving evidence-based treatment.",
        "language": "text/cql",
        "expression": "Is Recommendation Applicable?"
      } ],
      "groupingBehavior": "visual-group",
      "selectionBehavior": "any",
      "dynamicValue": [ {
        "path": "action.description",
        "language": "text/cql",
        "expression": "Get Detail"
      }, {
        "path": "action.title",
        "language": "text/cql",
        "expression": "Get Summary"
      }, {
        "path": "action.extension",
        "language": "text/cql",
        "expression": "Get Indicator"
      } ],
      "action": [ {
        "description": "Will order methadone or buprenorphine"
      }, {
        "description": "Will also refer to qualified treatment providers (i.e., substance disorder specialist)"
      }, {
        "description": "N/A - see comment, snooze 3 mo"
      } ]
    } ]
  } ]
}